--
-- PostgreSQL database dump
--

-- Dumped from database version 15.1
-- Dumped by pg_dump version 15.1

-- Started on 2022-12-26 19:15:58

SET statement_timeout = 0;
SET lock_timeout = 0;
SET idle_in_transaction_session_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SELECT pg_catalog.set_config('search_path', '', false);
SET check_function_bodies = false;
SET xmloption = content;
SET client_min_messages = warning;
SET row_security = off;

--
-- TOC entry 238 (class 1255 OID 16625)
-- Name: bilethesap(integer, integer); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.bilethesap(duraksayi integer, tarifefiyat integer) RETURNS integer
    LANGUAGE plpgsql
    AS $$
declare 
	fiyat integer;
begin
fiyat=durakSayi*tarifeFiyat;
return fiyat;
end;
$$;


ALTER FUNCTION public.bilethesap(duraksayi integer, tarifefiyat integer) OWNER TO postgres;

--
-- TOC entry 239 (class 1255 OID 16626)
-- Name: deleteengelliyolcusayisi(); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.deleteengelliyolcusayisi() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
	begin
	delete from engelliyolcukapasite where engelliyolcukapasite.engelliyolcusayi>=8;
return new;
end;
$$;


ALTER FUNCTION public.deleteengelliyolcusayisi() OWNER TO postgres;

--
-- TOC entry 240 (class 1255 OID 16627)
-- Name: deleteyolcusayisi(); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.deleteyolcusayisi() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
	begin
	delete from yolcukapasite where yolcukapasite.yolcusayi>=60;
return new;
end;
$$;


ALTER FUNCTION public.deleteyolcusayisi() OWNER TO postgres;

--
-- TOC entry 241 (class 1255 OID 16628)
-- Name: durakhesap(integer, integer); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.durakhesap(d1 integer, d2 integer) RETURNS integer
    LANGUAGE plpgsql
    AS $$
declare 
	durakSayi integer;
begin
durakSayi=abs(d2-d1);
return durakSayi;
end;
$$;


ALTER FUNCTION public.durakhesap(d1 integer, d2 integer) OWNER TO postgres;

--
-- TOC entry 242 (class 1255 OID 16629)
-- Name: engelliyolcusayisi(); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.engelliyolcusayisi() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
	begin
	update engelliyolcukapasite set engelliyolcusayi=engelliyolcusayi+6;
return new;
end;
$$;


ALTER FUNCTION public.engelliyolcusayisi() OWNER TO postgres;

--
-- TOC entry 243 (class 1255 OID 16630)
-- Name: kalangun(date); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.kalangun(sefertarih date) RETURNS integer
    LANGUAGE plpgsql
    AS $$
declare 
	kalanSure integer;
	simdikiTarih date;
begin
simdikiTarih=current_date;
kalanSure=seferTarih-simdikiTarih;
return kalanSure;
end;
$$;


ALTER FUNCTION public.kalangun(sefertarih date) OWNER TO postgres;

--
-- TOC entry 244 (class 1255 OID 16631)
-- Name: unvanbirim(text, text); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.unvanbirim(unvan text, birimad text) RETURNS text
    LANGUAGE plpgsql
    AS $$
declare 
    unvanBirim1 text;
begin

    unvanBirim1='unvan'+'birimAd';
return unvanBirim1;
end;
$$;


ALTER FUNCTION public.unvanbirim(unvan text, birimad text) OWNER TO postgres;

--
-- TOC entry 245 (class 1255 OID 16632)
-- Name: yolcusayisi(); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.yolcusayisi() RETURNS trigger
    LANGUAGE plpgsql
    AS $$
	begin
	update yolcukapasite set yolcusayi=yolcusayi+10;
return new;
end;
$$;


ALTER FUNCTION public.yolcusayisi() OWNER TO postgres;

SET default_tablespace = '';

SET default_table_access_method = heap;

--
-- TOC entry 214 (class 1259 OID 16633)
-- Name: musteri; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.musteri (
    musteriid integer NOT NULL,
    trenid integer NOT NULL,
    musteriad character varying(30),
    musterisoyad character varying(30),
    mustericinsiyet character varying(30),
    musteritel character varying(20),
    musterieposta character varying(30)
);


ALTER TABLE public.musteri OWNER TO postgres;

--
-- TOC entry 215 (class 1259 OID 16636)
-- Name: bireyselmusteri; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.bireyselmusteri (
    musteriid integer,
    bireyselmusteriid integer NOT NULL,
    bireyselmusteritcn integer NOT NULL
)
INHERITS (public.musteri);


ALTER TABLE public.bireyselmusteri OWNER TO postgres;

--
-- TOC entry 216 (class 1259 OID 16639)
-- Name: Bireysel Musteri_bireyselMusteriID_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.bireyselmusteri ALTER COLUMN bireyselmusteriid ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public."Bireysel Musteri_bireyselMusteriID_seq"
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 217 (class 1259 OID 16640)
-- Name: personel; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.personel (
    personelid integer NOT NULL,
    personelad character varying(30),
    personelsoyad character varying(30),
    personelcinsiyet character varying(30),
    personeldogumtarih date,
    personeldogumyeri character varying(30),
    personelbirimadi text,
    personelunvan text,
    personelmaas integer,
    personeltel integer
);


ALTER TABLE public.personel OWNER TO postgres;

--
-- TOC entry 218 (class 1259 OID 16645)
-- Name: idaripersonel; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.idaripersonel (
    personelid integer,
    idaripersonelid integer NOT NULL
)
INHERITS (public.personel);


ALTER TABLE public.idaripersonel OWNER TO postgres;

--
-- TOC entry 219 (class 1259 OID 16650)
-- Name: Idari Personel_idariPersonelID_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.idaripersonel ALTER COLUMN idaripersonelid ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public."Idari Personel_idariPersonelID_seq"
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 220 (class 1259 OID 16651)
-- Name: sirketpersonel; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.sirketpersonel (
    personelid integer,
    sirketpersonelid integer NOT NULL
)
INHERITS (public.personel);


ALTER TABLE public.sirketpersonel OWNER TO postgres;

--
-- TOC entry 221 (class 1259 OID 16656)
-- Name: Sirket Personel_sirketPersonelID_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.sirketpersonel ALTER COLUMN sirketpersonelid ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public."Sirket Personel_sirketPersonelID_seq"
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 222 (class 1259 OID 16657)
-- Name: vip; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.vip (
    musteriid integer,
    vipmusteriid integer NOT NULL,
    vipmusteritcn integer NOT NULL
)
INHERITS (public.musteri);


ALTER TABLE public.vip OWNER TO postgres;

--
-- TOC entry 223 (class 1259 OID 16660)
-- Name: VIP_VIPMusteriID_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.vip ALTER COLUMN vipmusteriid ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public."VIP_VIPMusteriID_seq"
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 224 (class 1259 OID 16661)
-- Name: tren; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.tren (
    trenid integer NOT NULL,
    hareketid integer NOT NULL,
    trenmarka character varying(30),
    ureticifirma character varying(30),
    trentur character varying(10),
    vagonadet integer
);


ALTER TABLE public.tren OWNER TO postgres;

--
-- TOC entry 225 (class 1259 OID 16664)
-- Name: anahat; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.anahat (
    trenid integer,
    anahatid integer NOT NULL
)
INHERITS (public.tren);


ALTER TABLE public.anahat OWNER TO postgres;

--
-- TOC entry 226 (class 1259 OID 16667)
-- Name: bilet; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.bilet (
    biletid integer NOT NULL,
    tarifeid integer NOT NULL,
    musteriid integer,
    hareketid integer NOT NULL,
    subeid integer NOT NULL,
    vagonid integer NOT NULL,
    bilettur character varying(30),
    sefertarih date
);


ALTER TABLE public.bilet OWNER TO postgres;

--
-- TOC entry 227 (class 1259 OID 16670)
-- Name: engelliyolcukapasite; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.engelliyolcukapasite (
    engelliyolcusayi integer
);


ALTER TABLE public.engelliyolcukapasite OWNER TO postgres;

--
-- TOC entry 228 (class 1259 OID 16673)
-- Name: hareket; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.hareket (
    hareketid integer NOT NULL,
    hareketsuresi character varying(20),
    hareketsaati character varying(20)
);


ALTER TABLE public.hareket OWNER TO postgres;

--
-- TOC entry 229 (class 1259 OID 16676)
-- Name: hareketistasyonu; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.hareketistasyonu (
    hareketistasyonid integer NOT NULL,
    hareketid integer NOT NULL,
    istasyonid integer NOT NULL
);


ALTER TABLE public.hareketistasyonu OWNER TO postgres;

--
-- TOC entry 230 (class 1259 OID 16679)
-- Name: satisnoktalari; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.satisnoktalari (
    subeid integer NOT NULL,
    subeil character varying(30),
    subeilce character varying(30)
);


ALTER TABLE public.satisnoktalari OWNER TO postgres;

--
-- TOC entry 231 (class 1259 OID 16682)
-- Name: silinenyolcusayisi; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.silinenyolcusayisi (
    silinenyolcu integer,
    silinentrenid integer
);


ALTER TABLE public.silinenyolcusayisi OWNER TO postgres;

--
-- TOC entry 232 (class 1259 OID 16685)
-- Name: tarifebilgileri; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.tarifebilgileri (
    tarifeid integer NOT NULL,
    tarifefiyat integer,
    tarifecesit character varying(30)
);


ALTER TABLE public.tarifebilgileri OWNER TO postgres;

--
-- TOC entry 233 (class 1259 OID 16688)
-- Name: trenpersoneli; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.trenpersoneli (
    trenpersonelid integer NOT NULL,
    personelid integer NOT NULL,
    trenid integer NOT NULL
);


ALTER TABLE public.trenpersoneli OWNER TO postgres;

--
-- TOC entry 234 (class 1259 OID 16691)
-- Name: yht; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.yht (
    trenid integer,
    yhtid integer NOT NULL
)
INHERITS (public.tren);


ALTER TABLE public.yht OWNER TO postgres;

--
-- TOC entry 235 (class 1259 OID 16694)
-- Name: yolcukapasite; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.yolcukapasite (
    yolcusayi integer
);


ALTER TABLE public.yolcukapasite OWNER TO postgres;

--
-- TOC entry 236 (class 1259 OID 16697)
-- Name: İstasyon; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public."İstasyon" (
    istasyonid integer NOT NULL,
    istasyonil character varying(30),
    istasyonilce character varying(30),
    istasyonturu character varying(30)
);


ALTER TABLE public."İstasyon" OWNER TO postgres;

--
-- TOC entry 237 (class 1259 OID 16700)
-- Name: İstasyon_istasyonID_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public."İstasyon" ALTER COLUMN istasyonid ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public."İstasyon_istasyonID_seq"
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 3470 (class 0 OID 16664)
-- Dependencies: 225
-- Data for Name: anahat; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.anahat (trenid, hareketid, trenmarka, ureticifirma, trentur, vagonadet, anahatid) FROM stdin;
1	1	test	test2	test3	4	1
\.


--
-- TOC entry 3471 (class 0 OID 16667)
-- Dependencies: 226
-- Data for Name: bilet; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.bilet (biletid, tarifeid, musteriid, hareketid, subeid, vagonid, bilettur, sefertarih) FROM stdin;
1	1	1	1	1	1	Business	2022-12-17
2	2	2	2	2	2	Business	2023-04-15
3	3	3	3	3	3	Ekonomi	2023-07-09
6	3	6	2	3	2	Business	2022-12-25
4	2	4	4	2	2	Ekonomi	2023-06-10
\.


--
-- TOC entry 3460 (class 0 OID 16636)
-- Dependencies: 215
-- Data for Name: bireyselmusteri; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.bireyselmusteri (musteriid, trenid, musteriad, musterisoyad, mustericinsiyet, musteritel, musterieposta, bireyselmusteriid, bireyselmusteritcn) FROM stdin;
\.


--
-- TOC entry 3472 (class 0 OID 16670)
-- Dependencies: 227
-- Data for Name: engelliyolcukapasite; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.engelliyolcukapasite (engelliyolcusayi) FROM stdin;
7
7
\.


--
-- TOC entry 3473 (class 0 OID 16673)
-- Dependencies: 228
-- Data for Name: hareket; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.hareket (hareketid, hareketsuresi, hareketsaati) FROM stdin;
1	45	16.30
2	120	08.30
3	60	12.15
4	90	10.04
5	40	17.45
\.


--
-- TOC entry 3474 (class 0 OID 16676)
-- Dependencies: 229
-- Data for Name: hareketistasyonu; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.hareketistasyonu (hareketistasyonid, hareketid, istasyonid) FROM stdin;
\.


--
-- TOC entry 3463 (class 0 OID 16645)
-- Dependencies: 218
-- Data for Name: idaripersonel; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.idaripersonel (personelid, personelad, personelsoyad, personelcinsiyet, personeldogumtarih, personeldogumyeri, personelbirimadi, personelunvan, personelmaas, personeltel, idaripersonelid) FROM stdin;
\.


--
-- TOC entry 3459 (class 0 OID 16633)
-- Dependencies: 214
-- Data for Name: musteri; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.musteri (musteriid, trenid, musteriad, musterisoyad, mustericinsiyet, musteritel, musterieposta) FROM stdin;
1	1	gürkan	kahraman	Erkek	1231234	gurkankahraman@gmail.com
2	2	eyüpcan	ekiz	Erkek	4564676	eyupcanekiz@gmail.com
3	3	ali	şahal	Erkek	657567657	alisahal@gmail.com
6	3	efe 	erbaş	Erkek	365462	efeerbas@gmail.com
4	1	mehmet	efe	Erkek	63737371	mehmetefe@gmail.com
\.


--
-- TOC entry 3462 (class 0 OID 16640)
-- Dependencies: 217
-- Data for Name: personel; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.personel (personelid, personelad, personelsoyad, personelcinsiyet, personeldogumtarih, personeldogumyeri, personelbirimadi, personelunvan, personelmaas, personeltel) FROM stdin;
1	Ayşe	Çakar	Kız	2000-02-12	Beydağ	Hizmetli	Hizmetli	5500	2121221512
2	Süleyman	Alemdar	Erkek	1992-02-16	Ödemiş	Tren	Makinist	12000	212121231
3	Fatih	Kerim	Erkek	1995-05-23	Konak	Şirket	Sekreter	10000	44521214
4	Serkan	Kahraman	Erkek	1972-05-16	Özlüce	İdari	CEO	80000	45521231
\.


--
-- TOC entry 3475 (class 0 OID 16679)
-- Dependencies: 230
-- Data for Name: satisnoktalari; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.satisnoktalari (subeid, subeil, subeilce) FROM stdin;
1	İstanbul	Tuzla
2	İstanbul	Pendik
3	Kocaeli	Gebze
4	İzmir	Bornova
\.


--
-- TOC entry 3476 (class 0 OID 16682)
-- Dependencies: 231
-- Data for Name: silinenyolcusayisi; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.silinenyolcusayisi (silinenyolcu, silinentrenid) FROM stdin;
\.


--
-- TOC entry 3465 (class 0 OID 16651)
-- Dependencies: 220
-- Data for Name: sirketpersonel; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.sirketpersonel (personelid, personelad, personelsoyad, personelcinsiyet, personeldogumtarih, personeldogumyeri, personelbirimadi, personelunvan, personelmaas, personeltel, sirketpersonelid) FROM stdin;
1	Gürkan	Bateman	Kız	2001-09-24	OSMANGAZİ	HİZMETLİ	PASPASÇEKER	2000	4545212	1
\.


--
-- TOC entry 3477 (class 0 OID 16685)
-- Dependencies: 232
-- Data for Name: tarifebilgileri; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.tarifebilgileri (tarifeid, tarifefiyat, tarifecesit) FROM stdin;
1	62	Ekonomi
2	160	Ekonomi
3	220	Business
4	140	Business
\.


--
-- TOC entry 3469 (class 0 OID 16661)
-- Dependencies: 224
-- Data for Name: tren; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.tren (trenid, hareketid, trenmarka, ureticifirma, trentur, vagonadet) FROM stdin;
1	1	Mitsubishi	Mitsubishi	AnaHat	6
2	2	Siemens	Siemens	YHT	6
3	3	Hyundai	Hyundai	Yük	16
4	4	EUROTEM	EUROTEM	Yük	12
6	5	test2	sdfdgsadf	test3	4
\.


--
-- TOC entry 3478 (class 0 OID 16688)
-- Dependencies: 233
-- Data for Name: trenpersoneli; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.trenpersoneli (trenpersonelid, personelid, trenid) FROM stdin;
\.


--
-- TOC entry 3467 (class 0 OID 16657)
-- Dependencies: 222
-- Data for Name: vip; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.vip (musteriid, trenid, musteriad, musterisoyad, mustericinsiyet, musteritel, musterieposta, vipmusteriid, vipmusteritcn) FROM stdin;
\.


--
-- TOC entry 3479 (class 0 OID 16691)
-- Dependencies: 234
-- Data for Name: yht; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.yht (trenid, hareketid, trenmarka, ureticifirma, trentur, vagonadet, yhtid) FROM stdin;
\.


--
-- TOC entry 3480 (class 0 OID 16694)
-- Dependencies: 235
-- Data for Name: yolcukapasite; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.yolcukapasite (yolcusayi) FROM stdin;
5
15
20
30
40
14
17
13
2
\.


--
-- TOC entry 3481 (class 0 OID 16697)
-- Dependencies: 236
-- Data for Name: İstasyon; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public."İstasyon" (istasyonid, istasyonil, istasyonilce, istasyonturu) FROM stdin;
2	Kocaeli	Gebze	YHT
3	İstanbul	Kadıköy	YHT
4	İstanbul	Pendik	Yolcu
5	Ankara	Maltepe	YHT
\.


--
-- TOC entry 3488 (class 0 OID 0)
-- Dependencies: 216
-- Name: Bireysel Musteri_bireyselMusteriID_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public."Bireysel Musteri_bireyselMusteriID_seq"', 1, false);


--
-- TOC entry 3489 (class 0 OID 0)
-- Dependencies: 219
-- Name: Idari Personel_idariPersonelID_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public."Idari Personel_idariPersonelID_seq"', 1, false);


--
-- TOC entry 3490 (class 0 OID 0)
-- Dependencies: 221
-- Name: Sirket Personel_sirketPersonelID_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public."Sirket Personel_sirketPersonelID_seq"', 1, true);


--
-- TOC entry 3491 (class 0 OID 0)
-- Dependencies: 223
-- Name: VIP_VIPMusteriID_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public."VIP_VIPMusteriID_seq"', 1, true);


--
-- TOC entry 3492 (class 0 OID 0)
-- Dependencies: 237
-- Name: İstasyon_istasyonID_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public."İstasyon_istasyonID_seq"', 5, true);


--
-- TOC entry 3273 (class 2606 OID 16702)
-- Name: anahat AnaHat_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.anahat
    ADD CONSTRAINT "AnaHat_pkey" PRIMARY KEY (anahatid, trenid);


--
-- TOC entry 3276 (class 2606 OID 16704)
-- Name: bilet Bilet_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.bilet
    ADD CONSTRAINT "Bilet_pkey" PRIMARY KEY (biletid);


--
-- TOC entry 3260 (class 2606 OID 16706)
-- Name: bireyselmusteri Bireysel Musteri_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.bireyselmusteri
    ADD CONSTRAINT "Bireysel Musteri_pkey" PRIMARY KEY (bireyselmusteriid, musteriid);


--
-- TOC entry 3285 (class 2606 OID 16708)
-- Name: hareketistasyonu Hareket İstasyonu_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.hareketistasyonu
    ADD CONSTRAINT "Hareket İstasyonu_pkey" PRIMARY KEY (hareketistasyonid);


--
-- TOC entry 3283 (class 2606 OID 16710)
-- Name: hareket Hareket_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.hareket
    ADD CONSTRAINT "Hareket_pkey" PRIMARY KEY (hareketid);


--
-- TOC entry 3264 (class 2606 OID 16712)
-- Name: idaripersonel Idari Personel_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.idaripersonel
    ADD CONSTRAINT "Idari Personel_pkey" PRIMARY KEY (idaripersonelid, personelid);


--
-- TOC entry 3258 (class 2606 OID 16714)
-- Name: musteri Musteri_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.musteri
    ADD CONSTRAINT "Musteri_pkey" PRIMARY KEY (musteriid);


--
-- TOC entry 3262 (class 2606 OID 16716)
-- Name: personel Personel_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.personel
    ADD CONSTRAINT "Personel_pkey" PRIMARY KEY (personelid);


--
-- TOC entry 3288 (class 2606 OID 16718)
-- Name: satisnoktalari Satis Noktaları_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.satisnoktalari
    ADD CONSTRAINT "Satis Noktaları_pkey" PRIMARY KEY (subeid);


--
-- TOC entry 3266 (class 2606 OID 16720)
-- Name: sirketpersonel Sirket Personel_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.sirketpersonel
    ADD CONSTRAINT "Sirket Personel_pkey" PRIMARY KEY (sirketpersonelid, personelid);


--
-- TOC entry 3290 (class 2606 OID 16722)
-- Name: tarifebilgileri Tarife Bilgileri_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.tarifebilgileri
    ADD CONSTRAINT "Tarife Bilgileri_pkey" PRIMARY KEY (tarifeid);


--
-- TOC entry 3292 (class 2606 OID 16724)
-- Name: trenpersoneli Tren Personeli_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.trenpersoneli
    ADD CONSTRAINT "Tren Personeli_pkey" PRIMARY KEY (trenpersonelid);


--
-- TOC entry 3271 (class 2606 OID 16726)
-- Name: tren Tren_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.tren
    ADD CONSTRAINT "Tren_pkey" PRIMARY KEY (trenid);


--
-- TOC entry 3269 (class 2606 OID 16728)
-- Name: vip VIP_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.vip
    ADD CONSTRAINT "VIP_pkey" PRIMARY KEY (vipmusteriid, musteriid, vipmusteritcn);


--
-- TOC entry 3294 (class 2606 OID 16730)
-- Name: yht YHT_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.yht
    ADD CONSTRAINT "YHT_pkey" PRIMARY KEY (yhtid, trenid);


--
-- TOC entry 3296 (class 2606 OID 16732)
-- Name: İstasyon İstasyon_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public."İstasyon"
    ADD CONSTRAINT "İstasyon_pkey" PRIMARY KEY (istasyonid);


--
-- TOC entry 3277 (class 1259 OID 16733)
-- Name: fki_hareketID_FK; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX "fki_hareketID_FK" ON public.bilet USING btree (hareketid);


--
-- TOC entry 3286 (class 1259 OID 16734)
-- Name: fki_istasyonID_FK; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX "fki_istasyonID_FK" ON public.hareketistasyonu USING btree (istasyonid);


--
-- TOC entry 3278 (class 1259 OID 16735)
-- Name: fki_musteriID_FK; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX "fki_musteriID_FK" ON public.bilet USING btree (musteriid);


--
-- TOC entry 3267 (class 1259 OID 16736)
-- Name: fki_personelID_FK; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX "fki_personelID_FK" ON public.sirketpersonel USING btree (personelid);


--
-- TOC entry 3279 (class 1259 OID 16737)
-- Name: fki_subeID_FK; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX "fki_subeID_FK" ON public.bilet USING btree (subeid);


--
-- TOC entry 3280 (class 1259 OID 16738)
-- Name: fki_tarifeID_FK; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX "fki_tarifeID_FK" ON public.bilet USING btree (tarifeid);


--
-- TOC entry 3274 (class 1259 OID 16739)
-- Name: fki_trenID_FK; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX "fki_trenID_FK" ON public.anahat USING btree (trenid);


--
-- TOC entry 3281 (class 1259 OID 16740)
-- Name: fki_vagonID_FK; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX "fki_vagonID_FK" ON public.bilet USING btree (vagonid);


--
-- TOC entry 3313 (class 2620 OID 16741)
-- Name: tren engelliyolcutrig; Type: TRIGGER; Schema: public; Owner: postgres
--

CREATE TRIGGER engelliyolcutrig AFTER INSERT ON public.tren FOR EACH ROW EXECUTE FUNCTION public.engelliyolcusayisi();


--
-- TOC entry 3314 (class 2620 OID 16742)
-- Name: tren silinenengelliyolcutrig; Type: TRIGGER; Schema: public; Owner: postgres
--

CREATE TRIGGER silinenengelliyolcutrig AFTER DELETE ON public.tren FOR EACH ROW EXECUTE FUNCTION public.deleteengelliyolcusayisi();


--
-- TOC entry 3315 (class 2620 OID 16743)
-- Name: tren silinenyolcutrig; Type: TRIGGER; Schema: public; Owner: postgres
--

CREATE TRIGGER silinenyolcutrig AFTER DELETE ON public.tren FOR EACH ROW EXECUTE FUNCTION public.deleteyolcusayisi();


--
-- TOC entry 3316 (class 2620 OID 16744)
-- Name: tren yolcutrig; Type: TRIGGER; Schema: public; Owner: postgres
--

CREATE TRIGGER yolcutrig AFTER INSERT ON public.tren FOR EACH ROW EXECUTE FUNCTION public.yolcusayisi();


--
-- TOC entry 3304 (class 2606 OID 16745)
-- Name: bilet hareketID_FK; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.bilet
    ADD CONSTRAINT "hareketID_FK" FOREIGN KEY (hareketid) REFERENCES public.hareket(hareketid) NOT VALID;


--
-- TOC entry 3308 (class 2606 OID 16750)
-- Name: hareketistasyonu hareketID_FK; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.hareketistasyonu
    ADD CONSTRAINT "hareketID_FK" FOREIGN KEY (hareketid) REFERENCES public.hareket(hareketid) NOT VALID;


--
-- TOC entry 3302 (class 2606 OID 16755)
-- Name: tren hareketID_FK; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.tren
    ADD CONSTRAINT "hareketID_FK" FOREIGN KEY (hareketid) REFERENCES public.hareket(hareketid) NOT VALID;


--
-- TOC entry 3309 (class 2606 OID 16760)
-- Name: hareketistasyonu istasyonID_FK; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.hareketistasyonu
    ADD CONSTRAINT "istasyonID_FK" FOREIGN KEY (istasyonid) REFERENCES public."İstasyon"(istasyonid) NOT VALID;


--
-- TOC entry 3305 (class 2606 OID 16765)
-- Name: bilet musteriID_FK; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.bilet
    ADD CONSTRAINT "musteriID_FK" FOREIGN KEY (musteriid) REFERENCES public.musteri(musteriid) NOT VALID;


--
-- TOC entry 3298 (class 2606 OID 16770)
-- Name: bireyselmusteri musteriID_FK; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.bireyselmusteri
    ADD CONSTRAINT "musteriID_FK" FOREIGN KEY (musteriid) REFERENCES public.musteri(musteriid) NOT VALID;


--
-- TOC entry 3301 (class 2606 OID 16775)
-- Name: vip musteriID_FK; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.vip
    ADD CONSTRAINT "musteriID_FK" FOREIGN KEY (musteriid) REFERENCES public.musteri(musteriid) NOT VALID;


--
-- TOC entry 3310 (class 2606 OID 16780)
-- Name: trenpersoneli personelID_FK; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.trenpersoneli
    ADD CONSTRAINT "personelID_FK" FOREIGN KEY (personelid) REFERENCES public.personel(personelid) NOT VALID;


--
-- TOC entry 3300 (class 2606 OID 16785)
-- Name: sirketpersonel personelID_FK; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.sirketpersonel
    ADD CONSTRAINT "personelID_FK" FOREIGN KEY (personelid) REFERENCES public.personel(personelid) NOT VALID;


--
-- TOC entry 3299 (class 2606 OID 16790)
-- Name: idaripersonel personelID_FK; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.idaripersonel
    ADD CONSTRAINT "personelID_FK" FOREIGN KEY (personelid) REFERENCES public.personel(personelid) NOT VALID;


--
-- TOC entry 3306 (class 2606 OID 16795)
-- Name: bilet subeID_FK; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.bilet
    ADD CONSTRAINT "subeID_FK" FOREIGN KEY (subeid) REFERENCES public.satisnoktalari(subeid) NOT VALID;


--
-- TOC entry 3307 (class 2606 OID 16800)
-- Name: bilet tarifeID_FK; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.bilet
    ADD CONSTRAINT "tarifeID_FK" FOREIGN KEY (tarifeid) REFERENCES public.tarifebilgileri(tarifeid) NOT VALID;


--
-- TOC entry 3297 (class 2606 OID 16805)
-- Name: musteri trenID_FK; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.musteri
    ADD CONSTRAINT "trenID_FK" FOREIGN KEY (trenid) REFERENCES public.tren(trenid) NOT VALID;


--
-- TOC entry 3311 (class 2606 OID 16810)
-- Name: trenpersoneli trenID_FK; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.trenpersoneli
    ADD CONSTRAINT "trenID_FK" FOREIGN KEY (trenid) REFERENCES public.tren(trenid) NOT VALID;


--
-- TOC entry 3312 (class 2606 OID 16815)
-- Name: yht trenID_FK; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.yht
    ADD CONSTRAINT "trenID_FK" FOREIGN KEY (trenid) REFERENCES public.tren(trenid) NOT VALID;


--
-- TOC entry 3303 (class 2606 OID 16820)
-- Name: anahat trenID_FK; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.anahat
    ADD CONSTRAINT "trenID_FK" FOREIGN KEY (trenid) REFERENCES public.tren(trenid) NOT VALID;


-- Completed on 2022-12-26 19:15:58

--
-- PostgreSQL database dump complete
--

